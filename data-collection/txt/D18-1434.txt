



















































Multimodal Differential Network for Visual Question Generation


Proceedings of the 2018 Conference on Empirical Methods in Natural Language Processing, pages 4002–4012
Brussels, Belgium, October 31 - November 4, 2018. c©2018 Association for Computational Linguistics

4002

Multimodal Differential Network for Visual Question Generation

Badri N. Patro Sandeep Kumar Vinod K. Kurmi Vinay P. Namboodiri
Indian Institute of Technology, Kanpur

{badri,sandepkr,vinodkk,vinaypn}@iitk.ac.in

Abstract

Generating natural questions from an image is
a semantic task that requires using visual and
language modality to learn multimodal rep-
resentations. Images can have multiple vi-
sual and language contexts that are relevant for
generating questions namely places, captions,
and tags. In this paper, we propose the use of
exemplars for obtaining the relevant context.
We obtain this by using a Multimodal Differ-
ential Network to produce natural and engag-
ing questions. The generated questions show a
remarkable similarity to the natural questions
as validated by a human study. Further, we ob-
serve that the proposed approach substantially
improves over state-of-the-art benchmarks on
the quantitative metrics (BLEU, METEOR,
ROUGE, and CIDEr).

1 Introduction

To understand the progress towards multimedia vi-
sion and language understanding, a visual Turing
test was proposed by (Geman et al., 2015) that was
aimed at visual question answering (Antol et al.,
2015). Visual Dialog (Das et al., 2017) is a nat-
ural extension for VQA. Current dialog systems
as evaluated in (Chattopadhyay et al., 2017) show
that when trained between bots, AI-AI dialog sys-
tems show improvement, but that does not trans-
late to actual improvement for Human-AI dialog.
We believe that this is because, the questions gen-
erated by bots are not natural (human-like) and
therefore does not translate to improved human di-
alog. Therefore an improvement in the quality of
questions could enable dialog agents to perform
well in human interactions. Further, (Ganju et al.,
2017) show that unanswered questions can be used
for improving VQA, Image captioning and Object
Classification.
An interesting line of work in this respect is the
work of (Mostafazadeh et al., 2016). Here the au-

thors have proposed the challenging task of gener-
ating natural questions for an image. One aspect
that is central to a question is the context that is rel-
evant to generate it. However, this context changes
for every image. As can be seen in Figure 1, an im-
age with a person on a skateboard would result in
questions related to the event. Whereas for a little
girl, the questions could be related to age rather
than the action. How can one have widely vary-
ing context provided for generating questions? To
solve this problem, we use the context obtained
by considering exemplars, specifically we use the
difference between relevant and irrelevant exem-
plars. We consider different contexts in the form
of Location, Caption, and Part of Speech tags.

Figure 1: Can you guess which among the given ques-
tions is human annotated and which is machine gener-
ated? 0

Our method implicitly uses a differential context
obtained through supporting and contrasting ex-
emplars to obtain a differential embedding. This
embedding is used by a question decoder to de-
code the appropriate question. As discussed fur-
ther, we observe this implicit differential con-
text to perform better than an explicit keyword

0The human annotated questions are (b) for the first im-
age and (a) for the second image.



4003

based context. The difference between the two ap-
proaches is illustrated in Figure 2. This also al-
lows for better optimization as we can backprop-
agate through the whole network. We provide de-
tailed empirical evidence to support our hypoth-
esis. As seen in Figure 1 our method generates
natural questions and improves over the state-of-
the-art techniques for this problem.

Figure 2: Here we provide intuition for using implicit
embeddings instead of explicit ones. As explained in
section 1, the question obtained by the implicit embed-
dings are natural and holistic than the explicit ones.

To summarize, we propose a multimodal differ-
ential network to solve the task of visual question
generation. Our contributions are: (1) A method to
incorporate exemplars to learn differential embed-
dings that captures the subtle differences between
supporting and contrasting examples and aid in
generating natural questions. (2) We provide Mul-
timodal differential embeddings, as image or text
alone does not capture the whole context and we
show that these embeddings outperform the ab-
lations which incorporate cues such as only im-
age, or tags or place information. (3) We provide
a thorough comparison of the proposed network
against state-of-the-art benchmarks along with a
user study and statistical significance test.

2 Related Work

Generating a natural and engaging question is an
interesting and challenging task for a smart robot
(like chat-bot). It is a step towards having a natu-
ral visual dialog instead of the widely prevalent vi-
sual question answering bots. Further, having the
ability to ask natural questions based on different
contexts is also useful for artificial agents that can
interact with visually impaired people. While the
task of generating question automatically is well

studied in NLP community, it has been relatively
less studied for image-related natural questions.
This is still a difficult task (Mostafazadeh et al.,
2016) that has gained recent interest in the com-
munity.

Recently there have been many deep learning
based approaches as well for solving the text-
based question generation task such as (Du et al.,
2017). Further, (Serban et al., 2016) have pro-
posed a method to generate a factoid based ques-
tion based on triplet set {subject, relation and ob-
ject} to capture the structural representation of text
and the corresponding generated question.

These methods, however, were limited to text-
based question generation. There has been exten-
sive work done in the Vision and Language do-
main for solving image captioning, paragraph gen-
eration, Visual Question Answering (VQA) and
Visual Dialog. (Barnard et al., 2003; Farhadi et al.,
2010; Kulkarni et al., 2011) proposed conven-
tional machine learning methods for image de-
scription. (Socher et al., 2014; Vinyals et al., 2015;
Karpathy and Fei-Fei, 2015; Xu et al., 2015; Fang
et al., 2015; Chen and Lawrence Zitnick, 2015;
Johnson et al., 2016; Yan et al., 2016) have gen-
erated descriptive sentences from images with the
help of Deep Networks. There have been many
works for solving Visual Dialog (Chappell et al.,
2004; Das et al., 2016, 2017; De Vries et al.,
2017; Strub et al., 2017). A variety of meth-
ods have been proposed by (Malinowski and Fritz,
2014; Lin et al., 2014; Antol et al., 2015; Ren
et al., 2015; Ma et al., 2016; Noh et al., 2016)
for solving VQA task including attention-based
methods (Zhu et al., 2016; Fukui et al., 2016; Gao
et al., 2015; Xu and Saenko, 2016; Lu et al., 2016;
Shih et al., 2016; Patro and Namboodiri, 2018).
However, Visual Question Generation (VQG) is a
separate task which is of interest in its own right
and has not been so well explored (Mostafazadeh
et al., 2016). This is a vision based novel task
aimed at generating natural and engaging ques-
tion for an image. (Yang et al., 2015) proposed
a method for continuously generating questions
from an image and subsequently answering those
questions. The works closely related to ours are
that of (Mostafazadeh et al., 2016) and (Jain et al.,
2017). In the former work, the authors used an
encoder-decoder based framework whereas in the
latter work, the authors extend it by using a varia-
tional autoencoder based sequential routine to ob-



4004

tain natural questions by performing sampling of
the latent variable.

3 Approach

Figure 3: An illustrative example shows the validity of
our obtained exemplars with the help of an object clas-
sification network, RESNET-101. We see that the prob-
ability scores of target and supporting exemplar image
are similar. That is not the case with the contrasting ex-
emplar. The corresponding generated questions when
considering the individual images are also shown.

In this section, we clarify the basis for our ap-
proach of using exemplars for question generation.
To use exemplars for our method, we need to en-
sure that our exemplars can provide context and
that our method generates valid exemplars.

We first analyze whether the exemplars are valid
or not. We illustrate this in figure 3. We used
a pre-trained RESNET-101 (He et al., 2016) ob-
ject classification network on the target, support-
ing and contrasting images. We observed that the
supporting image and target image have quite sim-
ilar probability scores. The contrasting exemplar
image, on the other hand, has completely different
probability scores.

Exemplars aim to provide appropriate context.
To better understand the context, we experimented
by analysing the questions generated through an
exemplar. We observed that indeed a support-
ing exemplar could identify relevant tags (cows in
Figure 3) for generating questions. We improve
use of exemplars by using a triplet network. This
network ensures that the joint image-caption em-
bedding for the supporting exemplar are closer to
that of the target image-caption and vice-versa.
We empirically evaluated whether an explicit ap-
proach that uses the differential set of tags as a
one-hot encoding improves the question genera-
tion, or the implicit embedding obtained based
on the triplet network. We observed that the im-
plicit multimodal differential network empirically
provided better context for generating questions.
Our understanding of this phenomenon is that both

target and supporting exemplars generate similar
questions whereas contrasting exemplars generate
very different questions from the target question.
The triplet network that enhances the joint embed-
ding thus aids to improve the generation of target
question. These are observed to be better than the
explicitly obtained context tags as can be seen in
Figure 2. We now explain our method in detail.

4 Method

The task in visual question generation (VQG) is to
generate a natural language question Q̂, for an im-
age I . We consider a set of pre-generated context
C from image I . We maximize the conditional
probability of generated question given image and
context as follows:

θ̂ = argmax
θ

∑
(I,C,Q)

log P (Q| I, C, θ) (1)

where θ is a vector for all possible parameters of
our model. Q is the ground truth question. The
log probability for the question is calculated by
using joint probability over {q0, q1, ....., qN} with
the help of chain rule. For a particular question,
the above term is obtained as:

log P (Q̂|I, C) =
N∑
t=0

log P (qt|I, C, q0, .., qt−1)

where N is length of the sequence, and qt is the
tth word of the question. We have removed θ for
simplicity.

Our method is based on a sequence to sequence
network (Sutskever et al., 2014; Vinyals et al.,
2015; Bahdanau et al., 2014). The sequence to se-
quence network has a text sequence as input and
output. In our method, we take an image as input
and generate a natural question as output. The ar-
chitecture for our model is shown in Figure 4. Our
model contains three main modules, (a) Represen-
tation Module that extracts multimodal features
(b) Mixture Module that fuses the multimodal rep-
resentation and (c) Decoder that generates ques-
tion using an LSTM-based language model.

During inference, we sample a question word qi
from the softmax distribution and continue sam-
pling until the end token or maximum length for
the question is reached. We experimented with
both sampling and argmax and found out that
argmax works better. This result is provided in
the supplementary material.



4005

Figure 4: This is an overview of our Multimodal Differential Network for Visual Question Generation. It consists
of a Representation Module which extracts multimodal features, a Mixture Module that fuses the multimodal
representation and a Decoder that generates question using an LSTM based language model. In this figure, we
have shown the Joint Mixture Module. We train our network with a Cross-Entropy and Triplet Loss.

4.1 Multimodal Differential Network

The proposed Multimodal Differential Network
(MDN) consists of a representation module and a
joint mixture module.

4.1.1 Finding Exemplars
We used an efficient KNN-based approach (k-d
tree) with Euclidean metric to obtain the exem-
plars. This is obtained through a coarse quantiza-
tion of nearest neighbors of the training examples
into 50 clusters, and selecting the nearest as sup-
porting and farthest as the contrasting exemplars.
We experimented with ITML based metric learn-
ing (Davis et al., 2007) for image features. Sur-
prisingly, the KNN-based approach outperforms
the latter one. We also tried random exemplars
and different number of exemplars and found that
k = 5 works best. We provide these results in the
supplementary material.

4.1.2 Representation Module
We use a triplet network (Frome et al., 2007; Hof-
fer and Ailon, 2015) in our representation mod-
ule. We refereed a similar kind of work done
in (Patro and Namboodiri, 2018) for building our
triplet network. The triplet network consists of
three subparts: target, supporting, and contrast-
ing networks. All three networks share the same
parameters. Given an image xi we obtain an em-
bedding gi using a CNN parameterized by a func-
tion G(xi,Wc) where Wc are the weights for the
CNN. The caption Ci results in a caption em-
bedding fi through an LSTM parameterized by a
function F (Ci,Wl) where Wl are the weights for
the LSTM. This is shown in part 1 of Figure 4.

Similarly we obtain image embeddings gs & gc
and caption embeddings fs & fc.

gi = G(xi,Wc) = CNN(xi)

fi = F (Ci,Wl) = LSTM(Ci)
(2)

4.1.3 Mixture Module
The Mixture module brings the image and caption
embeddings to a joint feature embedding space.
The input to the module is the embeddings ob-
tained from the representation module. We have
evaluated four different approaches for fusion viz.,
joint, element-wise addition, Hadamard and atten-
tion method. Each of these variants receives im-
age features gi & the caption embedding fi, and
outputs a fixed dimensional feature vector si. The
Joint method concatenates gi & fi and maps them
to a fixed length feature vector si as follows:

si =W
T
j ∗ tanh(Wijgi _ (Wcjfi + bj)) (3)

where gi is the 4096-dimensional convolu-
tional feature from the FC7 layer of pretrained
VGG-19 Net (Simonyan and Zisserman, 2014).
Wij ,Wcj ,Wj are the weights and bj is the bias for
different layers. _ is the concatenation operator.

Similarly, we obtain context vectors s+i & s
−
i

for the supporting and contrasting exemplars. De-
tails for other fusion methods are present in sup-
plementary.The aim of the triplet network (Schroff
et al., 2015) is to obtain context vectors that bring
the supporting exemplar embeddings closer to the
target embedding and vice-versa. This is obtained
as follows:

D(t(si), t(s
+
i )) + α < D(t(si), t(s

−
i ))

∀(t(si), t(s+i ), t(s
−
i )) ∈M,

(4)



4006

where D(t(si), t(sj)) = ||t(si) − t(sj)||22 is the
Euclidean distance between two embeddings t(si)
and t(sj). M is the training dataset that contains
all set of possible triplets. T (si, s+i , s

−
i ) is the

triplet loss function. This is decomposed into two
terms, one that brings the supporting sample closer
and one that pushes the contrasting sample further.
This is given by

T (si, s
+
i , s

−
i ) = max(0, D

+ + α−D−) (5)

HereD+, D− represent the Euclidean distance be-
tween the target and supporting sample, and target
and opposing sample respectively. The parameter
α(= 0.2) controls the separation margin between
these and is obtained through validation data.

4.2 Decoder: Question Generator
The role of decoder is to predict the probability
for a question, given si. RNN provides a nice way
to perform conditioning on previous state value
using a fixed length hidden vector. The condi-
tional probability of a question token at particular
time step qt is modeled using an LSTM as used
in machine translation (Sutskever et al., 2014). At
time step t, the conditional probability is denoted
by P (qt|I, C, q0, ...qt−1) = P (qt|I, C, ht), where
ht is the hidden state of the LSTM cell at time
step t, which is conditioned on all the previously
generated words {q0, q1, ...qN−1}. The word with
maximum probability in the probability distribu-
tion of the LSTM cell at step k is provided as an
input to the LSTM cell at step k + 1 as shown
in part 3 of Figure 4. At t = −1, we are feed-
ing the output of the mixture module to LSTM.
Q̂ = {q̂0, q̂1, ... ˆqN−1} are the predicted question
tokens for the input image I . Here, we are us-
ing q̂0 and ˆqN−1 as the special token START and
STOP respectively. The softmax probability for
the predicted question token at different time steps
is given by the following equations where LSTM
refers to the standard LSTM cell equations:

x−1 = Si = Mixture Module(gi, fi)

h0 = LSTM(x−1)

xt =We ∗ qt, ∀t ∈ {0, 1, 2, ...N − 1}
ht+1 = LSTM(xt, ht),∀t ∈ {0, 1, 2, ...N − 1}
ot+1 =Wo ∗ ht+1
ŷt+1 = P (qt+1|I, C, ht) = Softmax(ot+1)
Losst+1 = loss(ŷt+1, yt+1)

Where ŷt+1 is the probability distribution over all
question tokens. loss is cross entropy loss.

4.3 Cost function
Our objective is to minimize the total loss, that is
the sum of cross entropy loss and triplet loss over
all training examples. The total loss is:

L =
1

M

M∑
i=1

(Lcross + γLtriplet) (6)

whereM is the total number of samples,γ is a con-
stant, which controls both the loss. Ltriplet is the
triplet loss function 5. Lcross is the cross entropy
loss between the predicted and ground truth ques-
tions and is given by:

Lcross =
−1
N

N∑
t=1

ytlogP (q̂t|Ii, Ci, q̂0, .. ˆqt−1)

where,N is the total number of question tokens, yt
is the ground truth label. The code for MDN-VQG
model is provided 1.

4.4 Variations of Proposed Method
While, we advocate the use of multimodal differ-
ential network for generating embeddings that can
be used by the decoder for generating questions,
we also evaluate several variants of this architec-
ture. These are as follows:

Tag Net: In this variant, we consider extract-
ing the part-of-speech (POS) tags for the words
present in the caption and obtaining a Tag embed-
ding by considering different methods of combin-
ing the one-hot vectors. Further details and ex-
perimental results are present in the supplemen-
tary. This Tag embedding is then combined with
the image embedding and provided to the decoder
network.

Place Net: In this variant we explore obtain-
ing embeddings based on the visual scene under-
standing. This is obtained using a pre-trained
PlaceCNN (Zhou et al., 2017) that is trained to
classify 365 different types of scene categories.
We then combine the activation map for the input
image and the VGG-19 based place embedding to
obtain the joint embedding used by the decoder.

Differential Image Network: Instead of us-
ing multimodal differential network for generating
embeddings, we also evaluate differential image
network for the same. In this case, the embedding
does not include the caption but is based only on

1The project page for MDN-VQG Model is https://
badripatro.github.io/MDN-VQG/

https://badripatro.github.io/MDN-VQG/
https://badripatro.github.io/MDN-VQG/


4007

Figure 5: These are some examples from the VQG-COCO dataset which provide a comparison between our
generated questions and human annotated questions. (a) is the human annotated question for all the images. More
qualitative results are present in the supplementary material.

the image feature. We also exeperimented with us-
ing multiple exemplars and random exemplars.
Further details, pseudocode and results regarding
these are present in the supplementary material.

4.5 Dataset

We conduct our experiments on Visual Question
Generation (VQG) dataset (Mostafazadeh et al.,
2016), which contains human annotated questions
based on images of MS-COCO dataset. This
dataset was developed for generating natural and
engaging questions based on common sense rea-
soning. We use VQG-COCO dataset for our ex-
periments which contains a total of 2500 training
images, 1250 validation images, and 1250 testing
images. Each image in the dataset contains five
natural questions and five ground truth captions. It
is worth noting that the work of (Jain et al., 2017)
also used the questions from VQA dataset (An-
tol et al., 2015) for training purpose, whereas the
work by (Mostafazadeh et al., 2016) uses only
the VQG-COCO dataset. VQA-1.0 dataset is also
built on images from MS-COCO dataset. It con-
tains a total of 82783 images for training, 40504
for validation and 81434 for testing. Each im-
age is associated with 3 questions. We used pre-
trained caption generation model (Karpathy and
Fei-Fei, 2015) to extract captions for VQA dataset
as the human annotated captions are not there in
the dataset. We also get good results on the VQA
dataset (as shown in Table 2) which shows that our

method doesn’t necessitate the presence of ground
truth captions. We train our model separately for
VQG-COCO and VQA dataset.

4.6 Inference
We made use of the 1250 validation images to tune
the hyperparameters and are providing the results
on test set of VQG-COCO dataset. During infer-
ence, We use the Representation module to find
the embeddings for the image and ground truth
caption without using the supporting and contrast-
ing exemplars. The mixture module provides the
joint representation of the target image and ground
truth caption. Finally, the decoder takes in the
joint features and generates the question. We also
experimented with the captions generated by an
Image-Captioning network (Karpathy and Fei-Fei,
2015) for VQG-COCO dataset and the result for
that and training details are present in the supple-
mentary material.

5 Experiments

We evaluate our proposed MDN method in the fol-
lowing ways: First, we evaluate it against other
variants described in section 4.4 and 4.1.3. Sec-
ond, we further compare our network with state-
of-the-art methods for VQA 1.0 and VQG-COCO
dataset. We perform a user study to gauge hu-
man opinion on naturalness of the generated ques-
tion and analyze the word statistics in Figure 6.
This is an important test as humans are the best



4008

WHAT

WHAT'S

IS

HOW
WHERETHE

KIND

THAT

ARE

TALL

GAME

OF

NAME
A

CAT'S

THEY

IS

MAN'S

SCORE

DOG

OF
PICTURE

NAME

BIRD

FLOWERS

THAT
IN

MAKING

THE
OF

IS

ARE

GIRAFFE
THE

ON
WITH

PLAYING

Figure 6: Sunburst plot for VQG-COCO: The ith ring
captures the frequency distribution over words for the
ith word of the generated question. The angle sub-
tended at the center is proportional to the frequency of
the word. While some words have high frequency, the
outer rings illustrate a fine blend of words. We have
restricted the plot to 5 rings for easy readability. Best
viewed in color.

deciders of naturalness. We further consider the
statistical significance for the various ablations as
well as the state-of-the-art models. The quan-
titative evaluation is conducted using standard
metrics like BLEU (Papineni et al., 2002), ME-
TEOR (Banerjee and Lavie, 2005), ROUGE (Lin,
2004), CIDEr (Vedantam et al., 2015). Although
these metrics have not been shown to correlate
with ‘naturalness’ of the question these still pro-
vide a reasonable quantitative measure for com-
parison. Here we only provide the BLEU1 scores,
but the remaining BLEU-n metric scores are
present in the supplementary. We observe that the
proposed MDN provides improved embeddings to
the decoder. We believe that these embeddings
capture instance specific differential information
that helps in guiding the question generation. De-
tails regarding the metrics are given in the supple-
mentary material.

5.1 Ablation Analysis

We considered different variations of our method
mentioned in section 4.4 and the various ways
to obtain the joint multimodal embedding as de-
scribed in section 4.1.3. The results for the VQG-
COCO test set are given in table 1. In this ta-
ble, every block provides the results for one of the
variations of obtaining the embeddings and differ-
ent ways of combining them. We observe that the

Joint Method (JM) of combining the embeddings
works the best in all cases except the Tag Embed-
dings. Among the ablations, the proposed MDN
method works way better than the other variants
in terms of BLEU, METEOR and ROUGE met-
rics by achieving an improvement of 6%, 12% and
18% in the scores respectively over the best other
variant.

Emb. Method B1 METEOR ROUGE CIDEr
Tag AtM 22.4 8.6 22.5 20.8
Tag HM 24.4 10.8 24.3 55.0
Tag AM 24.4 10.6 23.9 49.4
Tag JM 22.2 10.5 22.8 50.1
PlaceCNN AtM 24.4 10.3 24.0 51.8
PlaceCNN HM 24.0 10.4 24.3 49.8
PlaceCNN AM 24.1 10.6 24.3 51.5
PlaceCNN JM 25.7 10.8 24.5 56.1
Diff. Img AtM 20.5 8.5 24.4 19.2
Diff. Img HM 23.6 8.6 22.3 22.0
Diff. Img AM 20.6 8.5 24.4 19.2
Diff. Img JM 30.4 11.7 22.3 22.8
MDN AtM 22.4 8.8 24.6 22.4
MDN HM 26.6 12.8 30.1 31.4
MDN AM 29.6 15.4 32.8 41.6
MDN(Ours) JM 36.0 23.4 41.8 50.7

Table 1: Analysis of variants of our proposed method
on VQG-COCO Dataset as mentioned in section 4.4
and different ways of getting a joint embedding (Atten-
tion (AtM), Hadamard (HM), Addition (AM) and Joint
(JM) method as given in section 4.1.3) for each method.
Refer section 5.1 for more details. B1 is BLEU1.

5.2 Baseline and State-of-the-Art

The comparison of our method with various base-
lines and state-of-the-art methods is provided in
table 2 for VQA 1.0 and table 3 for VQG-COCO
dataset. The comparable baselines for our method
are the image based and caption based models in
which we use either only the image or the caption
embedding and generate the question. In both the
tables, the first block consists of the current state-
of-the-art methods on that dataset and the second
contains the baselines. We observe that for the
VQA dataset we achieve an improvement of 8% in
BLEU and 7% in METEOR metric scores over the
baselines, whereas for VQG-COCO dataset this
is 15% for both the metrics. We improve over
the previous state-of-the-art (Yang et al., 2015)
for VQA dataset by around 6% in BLEU score
and 10% in METEOR score. In the VQG-COCO
dataset, we improve over (Mostafazadeh et al.,
2016) by 3.7% and (Jain et al., 2017) by 3.5% in
terms of METEOR scores.

5.3 Statistical Significance Analysis

We have analysed Statistical Signifi-
cance (Demšar, 2006) of our MDN model
for VQG for different variations of the mixture



4009

Methods BLEU1 METEOR ROUGE CIDEr
Sample(Yang,2015) 38.8 12.7 34.2 13.3
Max(Yang,2015) 59.4 17.8 49.3 33.1
Image Only 56.6 15.1 40.0 31.0
Caption Only 57.1 15.5 36.6 30.5
MDN-Attention 60.7 16.7 49.8 33.6
MDN-Hadamard 61.7 16.7 50.1 29.3
MDN-Addition 61.7 18.3 50.4 42.6
MDN-Joint (Ours) 65.1 22.7 52.0 33.1

Table 2: State-of-the-Art comparison on VQA-1.0
Dataset. The first block consists of the state-of-the-art
results, second block refers to the baselines mentioned
in section 5.2, third block provides the results for the
variants of mixture module present in section 4.1.3.

Context BLEU1 METEOR ROUGE CIDEr
Natural 2016 19.2 19.7 - -
Creative 2017 35.6 19.9 - -
Image Only 20.8 8.6 22.6 18.8
Caption Only 21.1 8.5 25.9 22.3
Tag-Hadamard 24.4 10.8 24.3 55.0
Place CNN-Joint 25.7 10.8 24.5 56.1
Diff.Image-Joint 30.4 11.7 26.3 38.8
MDN-Joint (Ours) 36.0 23.4 41.8 50.7
Humans 2016 86.0 60.8 - -

Table 3: State-of-the-Art (SOTA) comparison on VQG-
COCO Dataset. The first block consists of the SOTA
results, second block refers to the baselines mentioned
in section 5.2, third block shows the results for the best
method for different ablations mentioned in table 1.

module mentioned in section 4.1.3 and also
against the state-of-the-art methods. The Critical
Difference (CD) for Nemenyi (Fišer et al., 2016)
test depends upon the given α (confidence level,
which is 0.05 in our case) for average ranks and
N (number of tested datasets). If the difference in
the rank of the two methods lies within CD, then
they are not significantly different and vice-versa.
Figure 7 visualizes the post hoc analysis using
the CD diagram. From the figure, it is clear
that MDN-Joint works best and is statistically
significantly different from the state-of-the-art
methods.

Figure 7: The mean rank of all the models on the ba-
sis of METEOR score are plotted on the x-axis. Here
Joint refers to our MDN-Joint model and others are the
different variations described in section 4.1.3 and Nat-
ural (Mostafazadeh et al., 2016), Creative (Jain et al.,
2017). The colored lines between the two models rep-
resents that these models are not significantly different
from each other.

Figure 8: Perceptual Realism Plot for human survey.
Here every question has different number of responses
and hence the threshold which is the half of total re-
sponses for each question is varying. This plot is only
for 50 of the 100 questions involved in the survey. See
section 5.4 for more details.

5.4 Perceptual Realism

A human is the best judge of naturalness of
any question, We evaluated our proposed MDN
method using a ‘Naturalness’ Turing test (Zhang
et al., 2016) on 175 people. People were shown an
image with 2 questions just as in figure 1 and were
asked to rate the naturalness of both the questions
on a scale of 1 to 5 where 1 means ‘Least Nat-
ural’ and 5 is the ‘Most Natural’. We provided
175 people with 100 such images from the VQG-
COCO validation dataset which has 1250 images.
Figure 8 indicates the number of people who were
fooled (rated the generated question more or equal
to the ground truth question). For the 100 images,
on an average 59.7% people were fooled in this
experiment and this shows that our model is able
to generate natural questions.

6 Conclusion

In this paper we have proposed a novel method
for generating natural questions for an image. The
approach relies on obtaining multimodal differen-
tial embeddings from image and its caption. We
also provide ablation analysis and a detailed com-
parison with state-of-the-art methods, perform a
user study to evaluate the naturalness of our gen-
erated questions and also ensure that the results
are statistically significant. In future, we would
like to analyse means of obtaining composite em-
beddings. We also aim to consider the generalisa-
tion of this approach to other vision and language
tasks.



4010

References
Stanislaw Antol, Aishwarya Agrawal, Jiasen Lu, Mar-

garet Mitchell, Dhruv Batra, C. Lawrence Zitnick,
and Devi Parikh. 2015. VQA: Visual Question An-
swering. In International Conference on Computer
Vision (ICCV).

Dzmitry Bahdanau, Kyunghyun Cho, and Yoshua Ben-
gio. 2014. Neural machine translation by jointly
learning to align and translate. arXiv preprint
arXiv:1409.0473.

Satanjeev Banerjee and Alon Lavie. 2005. Meteor: An
automatic metric for mt evaluation with improved
correlation with human judgments. In Proceedings
of the acl workshop on intrinsic and extrinsic evalu-
ation measures for machine translation and/or sum-
marization, volume 29, pages 65–72.

K Barnard, P Duygulu, and D Forsyth. 2003. N. de
freitas, d. Blei, and MI Jordan,” Matching Words
and Pictures”, submitted to JMLR.

Alan R Chappell, Andrew J Cowell, David A Thur-
man, and Judi R Thomson. 2004. Supporting mutual
understanding in a visual dialogue between analyst
and computer. In Proceedings of the Human Fac-
tors and Ergonomics Society Annual Meeting, vol-
ume 48, pages 376–380. SAGE Publications Sage
CA: Los Angeles, CA.

Prithvijit Chattopadhyay, Deshraj Yadav, Viraj Prabhu,
Arjun Chandrasekaran, Abhishek Das, Stefan Lee,
Dhruv Batra, and Devi Parikh. 2017. Evaluating vi-
sual conversational agents via cooperative human-
ai games. In Proceedings of the Fifth AAAI Con-
ference on Human Computation and Crowdsourcing
(HCOMP).

Xinlei Chen and C Lawrence Zitnick. 2015. Mind’s
eye: A recurrent visual representation for image cap-
tion generation. In Proceedings of the IEEE con-
ference on computer vision and pattern recognition,
pages 2422–2431.

Abhishek Das, Harsh Agrawal, C. Lawrence Zitnick,
Devi Parikh, and Dhruv Batra. 2016. Human Atten-
tion in Visual Question Answering: Do Humans and
Deep Networks Look at the Same Regions? In Con-
ference on Empirical Methods in Natural Language
Processing (EMNLP).

Abhishek Das, Satwik Kottur, Khushi Gupta, Avi
Singh, Deshraj Yadav, José M.F. Moura, Devi
Parikh, and Dhruv Batra. 2017. Visual Dialog. In
IEEE Conference on Computer Vision and Pattern
Recognition (CVPR).

Jason V Davis, Brian Kulis, Prateek Jain, Suvrit Sra,
and Inderjit S Dhillon. 2007. Information-theoretic
metric learning. In Proceedings of the 24th interna-
tional conference on Machine learning, pages 209–
216. ACM.

Harm De Vries, Florian Strub, Sarath Chandar, Olivier
Pietquin, Hugo Larochelle, and Aaron Courville.
2017. Guesswhat?! visual object discovery through
multi-modal dialogue. In Proc. of CVPR.

Janez Demšar. 2006. Statistical comparisons of clas-
sifiers over multiple data sets. Journal of Machine
learning research, 7(Jan):1–30.

Xinya Du, Junru Shao, and Claire Cardie. 2017. Learn-
ing to ask: Neural question generation for reading
comprehension. arXiv preprint arXiv:1705.00106.

Hao Fang, Saurabh Gupta, Forrest Iandola, Rupesh Sri-
vastava, Li Deng, Piotr Dollár, Jianfeng Gao, Xi-
aodong He, Margaret Mitchell, John Platt, et al.
2015. From captions to visual concepts and back.
In Proceedings of the IEEE conference on computer
vision and pattern recognition.

Ali Farhadi, Mohsen Hejrati, Mohammad Amin
Sadeghi, Peter Young, Cyrus Rashtchian, Julia
Hockenmaier, and David Forsyth. 2010. Every pic-
ture tells a story: Generating sentences from images.
In European conference on computer vision, pages
15–29. Springer.

Darja Fišer, Tomaž Erjavec, and Nikola Ljubešić.
2016. Janes v0. 4: Korpus slovenskih spletnih
uporabniških vsebin. Slovenščina, 2(4):2.

Andrea Frome, Yoram Singer, Fei Sha, and Jitendra
Malik. 2007. Learning globally-consistent local dis-
tance functions for shape-based image retrieval and
classification. In Computer Vision, 2007. ICCV
2007. IEEE 11th International Conference on, pages
1–8. IEEE.

Akira Fukui, Dong Huk Park, Daylen Yang, Anna
Rohrbach, Trevor Darrell, and Marcus Rohrbach.
2016. Multimodal compact bilinear pooling for
visual question answering and visual grounding.
arXiv preprint arXiv:1606.01847.

Siddha Ganju, Olga Russakovsky, and Abhinav Gupta.
2017. What’s in a question: Using visual questions
as a form of supervision. In CVPR.

Haoyuan Gao, Junhua Mao, Jie Zhou, Zhiheng Huang,
Lei Wang, and Wei Xu. 2015. Are you talking to a
machine? dataset and methods for multilingual im-
age question. In Advances in Neural Information
Processing Systems, pages 2296–2304.

Donald Geman, Stuart Geman, Neil Hallonquist, and
Laurent Younes. 2015. Visual turing test for com-
puter vision systems. Proceedings of the National
Academy of Sciences of the United States of Amer-
ica, 112(12):3618–3623.

Kaiming He, Xiangyu Zhang, Shaoqing Ren, and Jian
Sun. 2016. Deep residual learning for image recog-
nition. In Proceedings of the IEEE conference on
computer vision and pattern recognition, pages 770–
778.



4011

Elad Hoffer and Nir Ailon. 2015. Deep metric learning
using triplet network. In International Workshop on
Similarity-Based Pattern Recognition, pages 84–92.
Springer.

Unnat Jain, Ziyu Zhang, and Alexander G Schwing.
2017. Creativity: Generating diverse questions
using variational autoencoders. In IEEE Confer-
ence on Computer Vision and Pattern Recognition
(CVPR).

Justin Johnson, Andrej Karpathy, and Li Fei-Fei. 2016.
Densecap: Fully convolutional localization net-
works for dense captioning. In Proceedings of the
IEEE Conference on Computer Vision and Pattern
Recognition, pages 4565–4574.

Andrej Karpathy and Li Fei-Fei. 2015. Deep visual-
semantic alignments for generating image descrip-
tions. In Proceedings of the IEEE conference
on computer vision and pattern recognition, pages
3128–3137.

Girish Kulkarni, Visruth Premraj, Sagnik Dhar, Sim-
ing Li, Yejin Choi, Alexander C Berg, and Tamara L
Berg. 2011. Baby talk: Understanding and generat-
ing image descriptions. In Proceedings of the 24th
CVPR. Citeseer.

Chin-Yew Lin. 2004. Rouge: A package for auto-
matic evaluation of summaries. In Text summariza-
tion branches out:Proceedings of the ACL-04 work-
shop.

Tsung-Yi Lin, Michael Maire, Serge Belongie, James
Hays, Pietro Perona, Deva Ramanan, Piotr Dollár,
and C Lawrence Zitnick. 2014. Microsoft coco:
Common objects in context. In European Confer-
ence on Computer Vision, pages 740–755. Springer.

Jiasen Lu, Jianwei Yang, Dhruv Batra, and Devi
Parikh. 2016. Hierarchical question-image co-
attention for visual question answering. In Advances
In Neural Information Processing Systems, pages
289–297.

Lin Ma, Zhengdong Lu, and Hang Li. 2016. Learning
to answer questions from image using convolutional
neural network. In Thirtieth AAAI Conference on
Artificial Intelligence.

Mateusz Malinowski and Mario Fritz. 2014. A multi-
world approach to question answering about real-
world scenes based on uncertain input. In Advances
in Neural Information Processing Systems.

Nasrin Mostafazadeh, Ishan Misra, Jacob Devlin, Mar-
garet Mitchell, Xiaodong He, and Lucy Vander-
wende. 2016. Generating natural questions about
an image. In Proceedings of the 54th Annual Meet-
ing of the Association for Computational Linguistics
(Volume 1: Long Papers), volume 1, pages 1802–
1813.

Hyeonwoo Noh, Paul Hongsuck Seo, and Bohyung
Han. 2016. Image question answering using con-
volutional neural network with dynamic parameter
prediction. In Proceedings of the IEEE Conference
on Computer Vision and Pattern Recognition, pages
30–38.

Kishore Papineni, Salim Roukos, Todd Ward, and Wei-
Jing Zhu. 2002. Bleu: a method for automatic eval-
uation of machine translation. In Proceedings of
the 40th annual meeting on association for compu-
tational linguistics, pages 311–318. Association for
Computational Linguistics.

Badri Patro and Vinay P Namboodiri. 2018. Differen-
tial attention for visual question answering. In Pro-
ceedings of the IEEE conference on computer vision
and pattern recognition, pages 7680–7688.

Mengye Ren, Ryan Kiros, and Richard Zemel. 2015.
Exploring models and data for image question an-
swering. In Advances in Neural Information Pro-
cessing Systems, pages 2953–2961.

Florian Schroff, Dmitry Kalenichenko, and James
Philbin. 2015. Facenet: A unified embedding for
face recognition and clustering. In Proceedings of
the IEEE Conference on Computer Vision and Pat-
tern Recognition, pages 815–823.

Iulian Vlad Serban, Alberto Garcı́a-Durán, Caglar
Gulcehre, Sungjin Ahn, Sarath Chandar, Aaron
Courville, and Yoshua Bengio. 2016. Generating
factoid questions with recurrent neural networks:
The 30m factoid question-answer corpus. arXiv
preprint arXiv:1603.06807.

Kevin J Shih, Saurabh Singh, and Derek Hoiem. 2016.
Where to look: Focus regions for visual question
answering. In Proceedings of the IEEE Conference
on Computer Vision and Pattern Recognition, pages
4613–4621.

Karen Simonyan and Andrew Zisserman. 2014. Very
deep convolutional networks for large-scale image
recognition. arXiv preprint arXiv:1409.1556.

Richard Socher, Andrej Karpathy, Quoc V Le, Christo-
pher D Manning, and Andrew Y Ng. 2014.
Grounded compositional semantics for finding and
describing images with sentences. Transactions
of the Association of Computational Linguistics,
2(1):207–218.

Florian Strub, Harm De Vries, Jeremie Mary, Bilal
Piot, Aaron Courville, and Olivier Pietquin. 2017.
End-to-end optimization of goal-driven and visu-
ally grounded dialogue systems. arXiv preprint
arXiv:1703.05423.

Ilya Sutskever, Oriol Vinyals, and Quoc V. Le. 2014.
Sequence to sequence learning with neural net-
works. In Proceedings of the 27th International
Conference on Neural Information Processing Sys-
tems, NIPS’14, pages 3104–3112.



4012

Ramakrishna Vedantam, C Lawrence Zitnick, and Devi
Parikh. 2015. Cider: Consensus-based image de-
scription evaluation. In Proceedings of the IEEE
conference on computer vision and pattern recog-
nition, pages 4566–4575.

Oriol Vinyals, Alexander Toshev, Samy Bengio, and
Dumitru Erhan. 2015. Show and tell: A neural im-
age caption generator. In Proceedings of the IEEE
Conference on Computer Vision and Pattern Recog-
nition, pages 3156–3164.

Huijuan Xu and Kate Saenko. 2016. Ask, attend and
answer: Exploring question-guided spatial attention
for visual question answering. In European Confer-
ence on Computer Vision, pages 451–466. Springer.

Kelvin Xu, Jimmy Ba, Ryan Kiros, Kyunghyun Cho,
Aaron Courville, Ruslan Salakhudinov, Rich Zemel,
and Yoshua Bengio. 2015. Show, attend and tell:
Neural image caption generation with visual at-
tention. In International Conference on Machine
Learning, pages 2048–2057.

Xinchen Yan, Jimei Yang, Kihyuk Sohn, and Honglak
Lee. 2016. Attribute2image: Conditional image
generation from visual attributes. In European
Conference on Computer Vision, pages 776–791.
Springer.

Yezhou Yang, Yi Li, Cornelia Fermuller, and Yiannis
Aloimonos. 2015. Neural self talk: Image under-
standing via continuous questioning and answering.
arXiv preprint arXiv:1512.03460.

Richard Zhang, Phillip Isola, and Alexei A Efros. 2016.
Colorful image colorization. In European Confer-
ence on Computer Vision, pages 649–666. Springer.

Bolei Zhou, Agata Lapedriza, Aditya Khosla, Aude
Oliva, and Antonio Torralba. 2017. Places: A 10
million image database for scene recognition. IEEE
Transactions on Pattern Analysis and Machine In-
telligence.

Yuke Zhu, Oliver Groth, Michael Bernstein, and Li Fei-
Fei. 2016. Visual7w: Grounded question answering
in images. In Proceedings of the IEEE Conference
on Computer Vision and Pattern Recognition, pages
4995–5004.


