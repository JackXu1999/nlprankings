










































Response Generation Based on Hierarchical Semantic Structure with POMDP Re-ranking for Conversational Dialogue Systems


Proceedings of the Seventh SIGHAN Workshop on Chinese Language Processing (SIGHAN-7), pages 29–34,
Nagoya, Japan, 14 October 2013.

Response Generation Based on Hierarchical Semantic Structure with 

POMDP Re-ranking for Conversational Dialogue Systems 

 

Jui-Feng Yeh Yuan-Cheng Chu 

Department of Computer Science and Information Engineering, 

National Chiayi University, 

No.300 Syuefu Rd., Chiayi City 60004, Taiwan (R.O.C.). 

Ralph@mail.ncyu.edu.tw s1000444@mail.ncyu.edu.tw 

 

 

Abstract 

Conversational spoken dialogue systems can 

assist individuals to communicate with ma-

chine to obtain relevant information to their 

problems efficiently and effectively. By refer-

ring to relevant response, individuals can un-

derstand how to interact with an intelligent 

system according to recommendations of dia-

logue systems. This work presents a response 

generation based on hierarchical semantic 

structure with POMDP Re-ranking for conver-

sational dialogue systems to achieve this aim. 

The hierarchical semantic structure incorpo-

rates the historical information according to 

dialogue discourse to keep more than one pos-

sible values for each slot. According to the sta-

tus of concept graph, the candidate sentences 

are generated. The near optimal response se-

lected by POMDP Re-ranking strategy to 

achieve human-like communication. The MOS 

and recall/precision rates are considered as the 

criterion for evaluations. Finally, the proposed 

method is adopted for dialogue system in trav-

el domain, and indicates its superiority in in-

formation retrieval over traditional approaches. 

1 Introduction 

Intelligent space is one of the new trends about 

computing environment construction. From 

providing the natural intelligent human machine 

interaction, conversational dialogue systems play 

an essential role in iterative communication. Let 

us now attempt to extend the observation into the 

frameworks of spoken dialogue systems, in 

viewpoints of input and output aspects, speech 

recognition and speech synthesis provide the 

main acoustic interfaces between users and dia-

logue management. However, the semantic ex-

traction and generating of natural language pro-

cessing plays more essential roles for human ma-

chine interactions. As shown in Figure 1, a spo-

ken dialogue system is composed of three com-

ponents: speech recognition and natural language 

processing, dialogue management, and response 

generating and text to speech. Actually, we 

should now look more carefully into the results 

obtained in speech recognition and natural lan-

guage processing. Since the accuracy of speech 

recognition is not near to perfect, it will cause the 

natural language misunderstanding.  

 

Input speech

User

Speech 

Recognition/

Natural Language 

Understanding

User action

Dialogue 

Management

Response 

Generation/Speech 

to Text
System actionResponse sentence

Figure 1. Overview of spoken dialogue systems. 

 

That is to say, it is hard for conversational dia-

logue systems to fill the values in the semantic 

slots perfectly. Dialogue management with only 

limited information about semantic slots is una-

ble to decide the correct system actions. Based 

on the incorrect system actions, the indisposed 

response generated by the system will make the 

system unfriendly. In the latest decades, some 

research efforts on response generating are in-

vested for improving the quality of conversation-

al dialogue systems.  

 

The goal of natural language generating is aimed 

at obtaining the sentence that is suitable to un-

derstand for users. Herein, there are three catego-

ries of sentence generating: template-based, rule-

based and statistics-based approaches. Template-

based approaches were first developed for gener-

ating the sentence in natural language processing 

(Lemon 2011; Bauer 2009; Zhan 2010). Fang et 

29



al. used the mixed template for constructing the 

declarative sentences. The declarative sentences 

were further converted into interrogative sen-

tences by changing the word order and verb 

forms (Fang et al. 2006). Compared to template-

based approaches, rule-based approaches were 

designed to provide more flexibility and desired 

sentences (Reiter and Dale 2000; Reiter 1996). 

Three main modules are included here in rule-

based approaches: content determination and text 

planning, sentence planning and surface realiza-

tion. Content determination and text planning are 

designed to decide the on the information com-

municated in a generated text. Dialogue man-

agement plays essential roles in content determi-

nation in conversational dialogue systems.  Ac-

cording to the results of content determination, 

sentence planning selects and organizes the 

propositions, events and states to generating the 

sentence which usually contain one issue. Its 

main function is to select and adapt linguistic 

forms so that the generated sentences are suitable 

for the local context in which they are to appear. 

Surface realization is designed to create a syntac-

tic representation in the form of a generated sen-

tence given the semantic concepts. The overall 

flow of the rule-based approach is illustrated in 

Figure 2. 

 

The third category about sentence generation 

is statistics-based approaches. The statistics-

based approaches are also called as trainable 

generation. Instead of the predefined templates 

and rules, trainable approaches build the models 

and the corresponding parameters using the gath-

ered corpus. Branavan et al. used the reinforce-

ment learning to predict causal relationship be-

tween content and event, the causal relationship 

was further adapted to derive the higher level 

content determination (Branavan et al. 2012). 

Walker et al. proposed trainable sentence planner, 

DSyntS, to enhance the variousness of generated 

sentences (Walker et al. 2001; Walker et al. 2002; 

Melcuk 1988). Stent et al. added the rhetorical 

knowledge into the sentence planner to form the 

system, SPaRKy (Stent et al. 2004).  

Since the response generating plays an essential 

role in conversational dialogue systems, the ex-

cellent response generating will cause the system 

more practical. For avoiding the limitation of 

human labeling, this paper invests a statistical 

approach based on hierarchical semantic struc-

ture with partially observable Markov decision 

process (POMDP) re-ranking strategy to produce 

the more spontaneous speaking style output. 

 

Content Selection

/Text Planning

Text plan

 tree

Sentence 

Planning

Surface 

Realization

SentenceCommunicative 

Goal

Response 

Sentence

 
Figure 2. The flow chart of rule-based sentence 

generation that composed three modules. 

 

The rest of this paper is organized as follows. 

Section 2 describes the proposed method and the 

related important modules in conversational dia-

logue system. Next, Section 3 presents the detail 

description about the proposed method especially 

in hierarchical semantic structure and partial ob-

servable Markov decision process (POMDP) re-

ranking strategy. Experiments to evaluate the 

proposed approach and the related discussion are 

presented in Section 4. Concluding remarks are 

finally made in Section 5. 

2 The proposed system framework 

With this investment, we want to generate the 

human-like response of conversational dialogue 

systems by statistical approach. Herein, the sys-

tem framework is divided into two phases: train-

ing and generation as described in Section 2.1 

and 2.2 respectively. 

2.1 Training phase  

Human to human conversations are gathered as 

the training corpus. The utterance obtained from 

the corpus is first as the seed sentence for 

equivalent utterance expansion. The keywords 

and corresponding sentence pattern are extracted 

from the utterance and are fed into a web search 

engine by API to gather the expanding utterances. 

Basically, the utterance with the near-meaning 

will be recalled as the candidates for further pro-

cessing. For each candidate utterance, the seman-

tic objects embedded here will be extracted as 

the values and filled into semantic slots defined 

in conceptual graph. Due to the hypernym (su-

perordinate) plays an essential role in infor-

mation retrieval and dialogue management, 

eHownet, developed by academia Sinica, Taiwan, 

is used as the knowledge based to provide rela-

tive information. The expanded utterances and 

the original one are all ranked. The ranking can 

be composed of system pre-ranking and human 

adjustment. According the results of ranking and 

the status of concept graph, the POMDP parame-

ters are estimated for generation phase. One of 

the most important issues is the reward function 

training.  

 

30



 

 

Open Data

Equivalent 

Utterance 

Expansion 

Corpora
Semantic 

Object 

Extraction

POMDP 

Model

POMDP

Re-Ranking

POMDP Reward

Concept 

Graph

Sentences

Keyword and 

Sentence Pattern

System 

Pre-Ranking

Human

Adjustment
Ranking

eHowNet

 
Figure 3. The system flow of training phase in proposed approach 

 

 

2.2 Generation phase 

As described in previous sections, response gen-

eration can be divided into content determination, 

sentence planning and surface realization. Herein, 

we combined the sentence planning and surface 

realization. That is to say, the proposed genera-

tion phase consists of two models: content selec-

tion and sentence planning and surface realiza-

tion.  

 

Semantic objects are first extracted from user’s 

input utterance and fed into corresponding se-

mantic slots defined in concept graph. According 

to the absent information in concept graph, the 

proposed method will decide the response con-

tents. The results of the response content deci-

sion will be further fed into sentence planning 

and equivalent utterance expansion. Sentence 

planning will form the basic word set and sen-

tence patterns for surface realization. The 

equivalent utterance expansion will gather the 

relevant sentence from the internet and the select 

candidate sentence with potential for surface re-

alization. Open data contain many sentences is fit 

for the response generation. After the surface 

realization, the acceptable spoken utterances are 

obtained. A POMDP reward function is used to 

rank the spoken utterances according the 

POMDP model obtained in the training phase. 

According to the result of POMDP re-ranking, 

the generated response is obtained.  

 

 

 

Open Data

Sentence Planning and Surface Realization

POMDP

Re-Ranking

Generated 

Response

POMDP 

Model

Sentence 

Planning

Semantic 

Object 

Extraction

Content Selection

Response 

Content

Decision

eHowNet
Concept 

Graph
Semantic 

Object

User Input

Utterance
Surface 

realization

Equivalent 

Utterance 

Expansion 

 

Figure 4. The system flow of generation phase in proposed approach 

 

 

 

31



3 The proposed hierarchical semantic 
structure with POMDP re-ranking 

This investment proposed a various response 

generation method for conversational dialogue 

systems. Actually, it is important for the practi-

cability of spoken conversation interface how to 

increase adoption in response generation. Con-

text determination decides which meaning would 

be carried in response. Realization strategies for 

dialogue responses depend on communicative 

confidence levels and interaction management 

goals. However, the only one value kept for each 

semantic slot in traditional dialogue management 

makes some information lost resulting in the per-

secution of users. Enrich the number of the re-

sponse utterances and their sentence will increase 

users’ delight. Some sentence patterns and lin-

guistics material will enrich the natural language 

generation significantly. In fact, these issues 

connect to the conversational dialogue system 

practice or not. In this section, we may consider 

the subject under the following heads: conceptual 

graph and hierarchical semantic structure and 

POMDP re-ranking strategy. It seems reasonable 

to consider response generation through two 

types of organization. 

3.1 Hierarchical semantic structure 

Thinking ways about speech is very essential 

because it provides insight into the utility of hu-

man communication. In other words, that human 

uses communication as a tool to further their own 

ends not merely in human to human communica-

tion but also in human machine interactions. Ig-

noring semantic relations among semantic ob-

jects causes the exactly extracting the values 

from spoken utterance hard in traditional spoken 

dialogue systems. Conceptual graph is adopted 

as the knowledge representation for describing 

the semantic relations in this paper. Compared to 

the semantic slot with only one value, this in-

vestment proposed a hierarchical semantic struc-

ture to store the potential values for correspond-

ing semantic slot by a linked list.  

 

Concept graph is one of formalisms for 

knowledge representation. Herein, we used them 

to represent the conceptual schemas used in con-

versational dialogue systems. An example of 

conceptual graph for speech act, 訂票 (booking 
ticket for the train), is illustrated in Figure 5. 

Speech act “訂票 (booking ticket for the train)” 
is the centre in the conceptual graph. Some non-

terminal nodes denote the concepts. Here, the 

item concept refers to the relationship between 

certain symbols and signifiers such as semantic 

objects. Semantic objects are regarded as the 

possible values for some semantic slots. For 
example, the non-terminal concept “ 旅 程
(journey)”, in the top left of Figure 5, is com-

posed of two semantic slots “起點(departure)” 

and “終點(destination)” and their relation. When 

talking about the “終點(destination),” users say "

台北 (Taipei)" and the dialogue management 

imagines "台北(Taipei)" is the potential value of 

the semantic slot “終點(destination)”. Then you 

have just used a signifier (the word " 台北

(Taipei)") to indicate a semantic slot “終點

(destination). A large part of semantics is lan-

guage, which uses words to symbolize things. 

Signifiers may be ideas, nouns, places, objects or 

feelings corresponding to semantic slots defined 

in conversational dialogue system.  

 

Speech Act:

訂票 旅程

起點

?
終點

?

SCGt-1

票價

?

艙等

自由座

艙等

座位

排

X
位

X

時間

日期

04/01
時段

13:51

 

Figure 5. An example of conceptual graph for the 

speech act “booking train tickets” 

 

This paper proposed a linked list based semantic 

slot for keeping more than one possible values 

for each semantic slot. In other word, the pro-

posed system will extract all possible semantic 

objects from discourse. This structure provides 

more flexible combinations for the response gen-

eration. According to these combinations, the 

response utterances will be re-ranked by POMDP 

strategy. 

3.2 POMDP re-ranking strategy 

Response utterances can be further divided into 

two source categories. The first category comes 

from sentence planning and surface realization 

by the system according to the concept graph and 

eHownet. The second category comes from in-

ternet data from the equivalent utterance expan-

sion. Finally, POMDP is adopted as the re-

ranking process to select the near optimal utter-

ance to be the generated response.  

32



Due to the conversational dialogue is an interac-

tive process. Considering the current user utter-

ance and predicting the next user utterance, gen-

erated responses are re-ranked by POMDP. The 

POMDP adopted as the response generation op-

erates as follows. At each time-step, that is to say, 

one turn in dialogue the state on the discourse 

record is in some unobserved state st. Due to the 

values in semantic slot is not exactly sure, the 

concept graph is partially observable.  Since st is 

not known exactly, a distribution over possible 

states called a belief state bt is maintained where 

bt(st) indicates the probability of being in a par-

ticular state st. Based on both, the dialogue man-

agement selects an action at, generating the re-

sponse to user, receives a reward Rt, and transi-

tions to next unobserved state, the corresponding 

concept graph at t+1. Here, syntactic and seman-

tic scores are used to calculate the reward. We 

call it as st+1, where st+1 depends only on st and at. 

The dialogue system then receives an observa-

tion ot+1, which is dependent on st+1 and at. Here-

in, ot+1 means the speech act and the semantic 

object carried in user utterance at turn t+1.This 

process is represented graphically as an influence 

diagram in Figure 6. 

Concept

Graph

St

Candidate 

Sentences

at

Semantic

Score

Syntactic 

Score

Selected 

Response

a*t

Speech Act

Ot

t t+1

Concept

Graph

St+1

Speech Act

Ot+1rt

Figure 6. Illustration about the proposed POMDP 

re-ranking strategy 

 

Given an existing belief state bt, the last system 

action at, and a new observation ot+1, the new 

updated belief state bt+1 is given by 

           
                                       

(1) 

Where   denotes the normalization factor. It can 

be calculated as equation (2). 

                (2) 

The standard optimizing process of POMDP is 

used for estimating of the action policy. 

4 Experimental results  

For evaluating the performance of the proposed 

method, a corpus contains 243 dialogues with 

7,445 sentences are used for training. A conver-

sational dialogue system using mandarin in travel 

domain is developed for assessing dynamically. 

Ignore of the error resulted from speech recogni-

tion engine, five dialogues for each individual to 

obtain the statistics.  

 

To evaluate the performance of the proposed 

method, the subjective evaluation, the mean 

opinion score (MOS), is used to measure the 

qualities of the voice transformation approaches. 

The opinion score was r is expressed in one 

number, from 1 to 5 (1 means bad and 5 denotes 

excellent). MOS is quite subjective, as it is based 

figures that results from what is perceived by 

people during tests. Twenty two individuals are 

asked to be the users using the conversation dia-

logue system developed in travel domain in this 

paper. Five dialogues with MOS scores for each 

individual during two weeks are recorded for 

further evaluation. Another system based on 

template response generation is also developed 

for comparison (Lee et al. 2009). Four aspects, 

variety, naturalness, suitability, intelligibility, are 

used to appraise the response systems. The ex-

perimental results are shown in Figure 7.  

 
Figure 7. Evaluation results about template-based 

and the proposed approaches 

 

According to the results, the suitability of these 

two approaches is high enough. Due to either 

template approach or the proposed approach are 

both able to provide the right information for 

users. The proposed approach outperforms the 

template approach significantly in variety and 

naturalness. These results show the concept 

graph and POMDP re-ranking ability to obtain 

improvement. 

33



5 Conclusions  

A new approach to generate responses for con-

versational dialogue systems has been presented 

in this study. The algorithm is based on the idea 

of hierarchical semantic structure of concept 

graph and POMDP re-ranking strategy. Linked 

list based semantic slot is applied to extract the 

values of semantic objects from input utterance. 

The two sentence generation sources: natural 

language generation and gathering open data 

from the internet are used to keep the variety of 

generated responses. POMDP re-ranking further 

selects near optimal utterance considering of the 

status of concept graph. The experimental results 

verified that the proposed approach results in 

keeping more information in concept graph and 

various responses generated especially in varia-

tion and naturalness. The future works include 

applying more precise estimation for POMDP. 

 

Acknowledgments 

The author would like to acknowledge National 

Science Council (NSC) of Taiwan for financial 

support to this research (project number: NSC 

102-2221-E-415-006-MY3).  

References  

Lemon, O. 2011. Learning What to Say and How to 

Say it: Joint Optimization of Spoken Dialogue 

Management and Natural Language Generation. 

Journal Computer Speech and Language. 25(2): 

210-221. 

Bauer, D. 2009. Statistical Natural Language Genera-

tion as Planning. Master's thesis of Department of 

Computational Linguistics, Saarland University, 

Saarbrucken, Germany. 

Zhan, W.D. 2010. A Brief Introduction to Natural 

Language Understanding and Generation. Termi-

nology Standardization & Information Technology 

4. 

Fang, Z.-W., Du, L.-M., Yu, S.-Y. 2006. A Chinese 

Sentence Generator Based on Hybrid-Template for 

Spoken Dialogue System. Journal of the Graduate 

School of the Chinese Academy of Sciences, 23(1): 

23-30. 

Reiter, E., and Dale, R. 2000. Building Natural Lan-

guage Generation Systems. Cambridge University 

Press. 

Reiter, E. 1996. Building Natural-Language Genera-

tion Systems. In Alison Cawsey, ed., Proceedings 

of the AI and Patient Education Workshop, Glas-

gow, GIST Technical Report G95.3, Department of 

Computing Science, University of Glasgow. 

Branavan, S.R.K., Kushman, N., Lei, T., Barzilay, R. 

2012. Learning High-Level Planning from Text. 

Proceeding ACL '12 Proceedings of the 50th An-

nual Meeting of the Association for Computational 

Linguistics: Vol. 1: 126-135. 

Walker, M. A. Rambow, O., Rogati, M. 2001. SPoT: 

A Trainable Sentence Planner. Proceedings of the 

2nd Annual Meeting of the North American Chap-

ter of the Associataion for Computational Linguis-

tics. 

Walker, M. A. O. Rambow, O., Rogati, M. 2002. 

Training a Sentence Planner for Spoken Dialogue 

using Boosting. Computer Speech and Language: 

Special Issue on Spoken Language Generation, 

2002. 

Melcuk, I. A. 1988.  Dependency Syntax: Theory and 

Practice, SUNY, Albany, New York. 

Stent, A., Prasad, R., and Walker, M. 2004. Trainable 

Sentence Planning for Complex Information 

Presentation in Spoken Dialog Systems. Proceed-

ings of ACL. 

Lee, C., Jung, S., Kim, S., Lee, G. G. 2009. Example-

based Dialog Modeling for Practical Multi-domain 

Dialog System. Speech Communication 51(5): 

466−484. 

34


